---
title: Getting MapLibre working for both native and web in Expo
date: 2025-01-05
teaser: |-
  I've been dabbling of late in building a mobile app with <a href="https://reactnative.dev/">React Native</a> + <a href="https://expo.dev/">Expo</a>. One of the things that attracted me most to Expo, is that &ndash; on top of the "write once, <a href="https://stackoverflow.com/questions/55113505/is-it-sufficient-to-learn-only-react-native-for-building-ios-and-android-apps">run on iOS and Android</a>" claim of React Native &ndash; Expo claims to also let an app run seamlessly <a href="https://www.reddit.com/r/reactnative/comments/1204gzr/is_expo_ready_to_support_web_platform_as_well/">on the web</a>. Anyway, as it turns out (surprise surprise &ndash; not!), neither of <a href="https://news.ycombinator.com/item?id=36871651">those claims</a> are particularly aligned with reality. I found this out &ndash; with the claim of "run on native and web" &ndash; as soon as I wanted to add a simple map to my app.

  [thumbnail expo-maplibre-native-plus-web-demo-screenshot.jpg Behold, a MapLibre map, working both for native and for web, in Expo.]

  Below is my humble lil' guide to getting <a href="https://maplibre.org/">MapLibre</a> working for both native and web in Expo. Note: if you want to skip the step-by-step shpiel, and you just want a working example with all the code, feel free to head straight to the <a href="https://github.com/Jaza/expo-maplibre-native-plus-web-demo">Expo MapLibre native + web demo</a> on GitHub.
tags:
  - thoughtstopics/expo
  - thoughtstopics/javascript
  - thoughtstopics/mapping
---
I've been dabbling of late in building a mobile app with <a href="https://reactnative.dev/">React Native</a> + <a href="https://expo.dev/">Expo</a>. One of the things that attracted me most to Expo, is that &ndash; on top of the "write once, <a href="https://stackoverflow.com/questions/55113505/is-it-sufficient-to-learn-only-react-native-for-building-ios-and-android-apps">run on iOS and Android</a>" claim of React Native &ndash; Expo claims to also let an app run seamlessly <a href="https://www.reddit.com/r/reactnative/comments/1204gzr/is_expo_ready_to_support_web_platform_as_well/">on the web</a>. Anyway, as it turns out (surprise surprise &ndash; not!), neither of <a href="https://news.ycombinator.com/item?id=36871651">those claims</a> are particularly aligned with reality. I found this out &ndash; with the claim of "run on native and web" &ndash; as soon as I wanted to add a simple map to my app.

[thumbnail expo-maplibre-native-plus-web-demo-screenshot.jpg Behold, a MapLibre map, working both for native and for web, in Expo.]

Below is my humble lil' guide to getting <a href="https://maplibre.org/">MapLibre</a> working for both native and web in Expo. Note: if you want to skip the step-by-step shpiel, and you just want a working example with all the code, feel free to head straight to the <a href="https://github.com/Jaza/expo-maplibre-native-plus-web-demo">Expo MapLibre native + web demo</a> on GitHub.

<h2>Map library options</h2>

First of all, a quick rundown of the options that one has at one's disposal, when wanting to add a map to an Expo app.

The simplest and the most recommended option is to <a href="https://docs.expo.dev/versions/latest/sdk/map-view/">use <code>react-native-maps</code></a>. This is the only solution that works with <a href="https://expo.dev/go">Expo Go</a>, and it's the only one that's documented in the official Expo docs.

However, it's explicitly stated that <code>react-native-maps</code> isn't web-compatible, so if you used it and you also wanted maps on web, your only choice would be to fall back to something like <a href="https://github.com/visgl/react-google-maps"><code>react-google-maps</code></a> for web. Also, you'd (potentially) have to deal with <a href="https://www.apple.com/maps/">Apple Maps</a> on iOS vs <a href="https://www.google.com/maps/">Google Maps</a> on Android. And &ndash; my main reason for steering clear of this option &ndash; you'd have to live with the <a href="https://joemorrison.substack.com/p/google-maps-moat-is-evaporating">these-days-horrific pricing</a> and draconian <abbr title="Terms of Service">ToS</abbr> of the Google Maps API.

The next option is to <a href="https://github.com/rnmapbox/maps">use <code>rnmapbox</code></a>. This is the solution that I instinctively chose first up, and that I stuck with for quite a while, mainly because (for the past several years) I've become accustomed to using <a href="https://www.mapbox.com/">Mapbox</a> instead of Google Maps anyway, for maps on old-skool web sites. Plus, <code>rnmapbox</code> claims to (somewhat) support Expo Web.

Unfortunately, "somewhat" is in my opinion an <a href="https://github.com/rnmapbox/maps/issues/3597">overly optimistic</a> assessment of <code>rnmapbox</code>'s web support &ndash; basically, instead of trying to go down that route, you should instead fall back to <a href="https://github.com/visgl/react-map-gl"><code>react-map-gl</code></a> with <a href="https://github.com/mapbox/mapbox-gl-js"><code>mapbox-gl-js</code></a> for web. Plus, I was surprised to learn that Mapbox is no longer the mapping provider of choice for hobbyists, since it decided to <a href="https://wptavern.com/mapbox-gl-js-is-no-longer-open-source">stop open-sourcing</a> its mapping library.

Which led me to MapLibre, which is a fork of Mapbox (v1) before the folks at Mapbox decided to release v2 with a non-open-source license. So, with MapLibre (plus <a href="https://www.maptiler.com/">MapTiler</a>), I don't have to worry about disagreeable pricing / ToS. And I get basically the same map library on native and web. Although not exactly the same library &ndash; it inherits the limitations of the Mapbox libraries, so you need to use <a href="https://github.com/maplibre/maplibre-react-native"><code>maplibre-react-native</code></a> for native, and fall back to <code>react-map-gl</code> with <a href="https://github.com/maplibre/maplibre-gl-js"><code>maplibre-gl-js</code></a> for web.

<h2>Map features</h2>

What I needed, and what I'm demo'ing here, is a pretty simple map. It shows the user's location on load (if the user grants location permissions, otherwise it falls back to showing latitude / longitude <code>0,0</code> on load). And when the user presses the "Go" button, it grabs the current centre position of the map, and shows the latitude / longitude coordinates of that centre position. That's it!

You're likely to need more functionality than that for a map in your own app. Hopefully this provides you with a humble base to start off from. Good luck getting other bells and whistles working (for native and web)!
